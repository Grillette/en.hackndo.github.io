<!doctype html>
<html lang="fr-fr" class="no-js">

  <head>
    <link href="http://gmpg.org/xfn/11" rel="profile" hreflang="fr">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
    <meta name="google-site-verification" content="JeRPv2CEcpONAy8C7dMr1nzjlpZxlxYCtt2PnuQ78g8" />
    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  
    <title>
      
        Service Principal Name (SPN) - hackndo
      
    </title>

	<link rel="stylesheet" href="/assets/css/style.css?v=1.13"> <!-- Resource style -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Signika:600"> <!-- Logo font -->
    <script src="/assets/js/modernizr.js"></script> <!-- Modernizr -->
    
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/icones/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/icones/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icones/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/icones/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/icones/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/icones/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icones/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/icones/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icones/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icones/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icones/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/icones/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icones/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/res/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/icones/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
  	
	<!-- RSS -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="hackndo" />

    <!-- Twitter card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@hackanddo" />
    <meta name="twitter:creator" content="@hackanddo" />
    <meta name="twitter:title" content="Service Principal Name (SPN)" />
    <meta name="twitter:description" content="Pour la suite des articles, la notion de SPN (Service Principal Name) va être abordée. Cet article permet de faire un point sur cette notion afin de comprendre ce que sont ces SPN, à quoi ils servent et comment ils sont utilisés." />
    
    <meta name="twitter:image" content="http://localhost:4000/assets/uploads/2019/02/spn.png" />
    
  
    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
      ga('create', 'UA-80312745-1', 'auto');
      ga('send', 'pageview');
  
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Service Principal Name (SPN)" />
<meta name="author" content="Pixis" />
<meta property="og:locale" content="fr_FR" />
<meta name="description" content="Pour la suite des articles, la notion de SPN (Service Principal Name) va être abordée. Cet article permet de faire un point sur cette notion afin de comprendre ce que sont ces SPN, à quoi ils servent et comment ils sont utilisés." />
<meta property="og:description" content="Pour la suite des articles, la notion de SPN (Service Principal Name) va être abordée. Cet article permet de faire un point sur cette notion afin de comprendre ce que sont ces SPN, à quoi ils servent et comment ils sont utilisés." />
<link rel="canonical" href="http://localhost:4000/service-principal-name-spn/" />
<meta property="og:url" content="http://localhost:4000/service-principal-name-spn/" />
<meta property="og:site_name" content="hackndo" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-03-08T10:17:22+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/icones/logo.png"},"name":"Pixis"},"url":"http://localhost:4000/service-principal-name-spn/","headline":"Service Principal Name (SPN)","dateModified":"2019-03-08T10:17:22+01:00","datePublished":"2019-03-08T10:17:22+01:00","author":{"@type":"Person","name":"Pixis"},"description":"Pour la suite des articles, la notion de SPN (Service Principal Name) va être abordée. Cet article permet de faire un point sur cette notion afin de comprendre ce que sont ces SPN, à quoi ils servent et comment ils sont utilisés.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/service-principal-name-spn/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body>
    <header class="cd-main-header">
    <a href="/" class="cd-logo"><img src="/assets/icones/logo.png" /> <span class="cd-logo-title">hackndo</span></a>
		
    <a href="#0" class="cd-nav-trigger">Menu<span></span></a>

</header> <!-- .cd-main-header -->
    <main class="cd-main-content">
		<nav class="cd-side-nav">
            <div class="sidebar-about">
    <h1>
        <img id="site-logo" src="/assets/icones/logo.png" alt="logo" title="logo" />
        <a class="sidebar-title" href="/">
        hackndo
        </a>
    </h1>
    <p class="lead">Think out of the box</p>
</div>

<ul>
    <li class="cd-label">Blog</li>
    <li class="">
        <a href="/">Home</a>
    </li>
    
    
        
            
        
    
        
            
                <li class="">
                    <a href="/about/">À propos</a>
                </li>
            
        
    
        
            
                <li class="">
                    <a href="/archives/">Archives</a>
                </li>
            
        
    
        
            
                <li class="">
                    <a href="/contact/">Me contacter</a>
                </li>
            
        
    
        
            
                <li class="">
                    <a href="/disclaimer/">Disclaimer</a>
                </li>
            
        
    
        
    
        
            
        
    
        
            
                <li class="">
                    <a href="/projects/">Projets</a>
                </li>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
    
        
    
</ul>
<ul>
    <li class="cd-label">Liens</li>
    <li><a href="https://www.dailysecurity.fr/" target="_blank">Blog de Geluchat</a></li>
    <li><a href="http://lsdsecdaemon.com" target="_blank">Blog de Th3_l5D</a></li>
    <li><a href="http://inf0sec.fr" target="_blank">Blog de Matthieu</a></li>
</ul>
<p class="sidebar-copyright">&copy; 2019. Tous droits réservés.</p>
<div class="sidebar-social">
<ul>
  <li><a href="https://twitter.com/HackAndDo" title="Twitter" target="_blank"><img alt="Twitter" title="Twitter" src="/assets/icones/social/twitter.png" /></a></li>
  <li><a href="https://github.com/hackndo" title="Github" target="_blank"><img title="Github" alt="Github" src="/assets/icones/social/github.png" /></a></li>
  <li><a href="https://www.youtube.com/channel/UC9WYWHLdu9TK-0Hu3wcHJ9g" title="Youtube" target="_blank"><img title="Youtube" alt="Youtube" src="/assets/icones/social/youtube.png" /></a></li>
  <li><a href="https://discord.gg/9At6SUZ" title="Discord" target="_blank"><img title="Discord" alt="Discord" src="/assets/icones/social/discord.png" /></a></li>
  <li><a href="https://www.linkedin.com/in/romainbentz/" title="LinkedIn" target="_blank"><img title="LinkedIn" alt="LinkedIn" src="/assets/icones/social/linkedin.png" /></a></li>
  <li><a href="https://sh.hackndo.com" title="Shell" target="_blank"><img title="Shell" alt="Shell" src="/assets/icones/social/shell.png" /></a></li>
  <li><a href="/feed.xml" title="RSS" target="_blank"><img title="RSS" alt="RSS" src="/assets/icones/social/rss.png" /></a></li>
  <li><a href="https://ko-fi.com/hackndo" title="Ko-Fi" target="_blank"><img title="Ko-Fi" alt="Ko-Fi" src="/assets/icones/social/kofi.gif" /></a></li>
</ul>
</div>
        </nav>

        <div class="content-wrapper">
            <div class="post">
  
  <div class="post-cover">
    <img src="/assets/uploads/2019/02/spn.png" alt="Service Principal Name (SPN)" title="Service Principal Name (SPN)" />
  </div>
  
  <h1 class="post-title">Service Principal Name (SPN)</h1>
  <div class="post-info">
      <p class="alignleft">08 Mar 2019 <a class="post-comments-count" href="http://http://localhost:4000/service-principal-name-spn/#disqus_thread"></a></p>
      <p class="alignright">Auteur : <strong><a href="https://twitter.com/HackAndDo">Pixis</a></strong></p>
      <div class="keywords">
        <span class="post-tags"><a href="/archives/#active-directory"><i class="fas fa-tags"></i> Active Directory</a><a href="/archives/#windows"><i class="fas fa-tags"></i> Windows</a></span>
      </div>
</div>

  <article>
  <p>Pour la suite des articles, la notion de SPN (Service Principal Name) va être abordée. Cet article permet de faire un point sur cette notion afin de comprendre ce que sont ces “SPN”, à quoi ils servent et comment ils sont utilisés.</p>

<!--more-->

<h2 id="quest-ce-quun-spn">Qu’est-ce qu’un SPN</h2>

<p>Nous nous plaçons dans un environnement Active Directory. Pour comprendre la notion de SPN, il faut comprendre ce qu’est la notion de service au sein d’un active directory.</p>

<p>Un service est en fait une fonctionnalité, un logiciel, quelque chose qui peut être utilisé par d’autres membres de l’AD (Active Directory). On peut avoir par exemple un serveur web, un partage réseau, un service DNS, un service d’impression, etc. Pour identifier un service, nous avons besoin de deux éléments à minima. Le même service peut tourner sur différentes machines, donc il faut spécifier <strong>la machine</strong>, et une machine peut héberger plusieurs services, donc il faut, évidemment, spécifier <strong>le service</strong>.</p>

<p>C’est en combinant ces informations que nous pouvons désigner un service de manière précise. Cette combinaison représente son <strong>Service Principal Name</strong>, ou <strong>SPN</strong>. Il se présente de la sorte :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>classe_du_service/hostname_ou_FQDN
</code></pre></div></div>

<p>La classe du service est en fait un nom un peu générique qui correspond au service. Par exemple, tous les serveurs web sont regroupés dans la classe “www”, les services SQL sont dans la classe “SqlServer” etc.</p>

<p>Si jamais le service présente un port particulier, ou si on veut le préciser pour éviter toute ambiguïté, il est possible de l’ajouter à la fin :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>classe_du_service/hostname_ou_FQDN:port
</code></pre></div></div>

<p>Enfin, un nom peut être donné au SPN, mais c’est tout à fait arbitraire et optionnel.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>classe_du_service/hostname_ou_FQDN:port/nom_arbitraire
</code></pre></div></div>

<p>Ainsi, dans mon Active Directory, j’ai deux machines proposant des services web, <code class="highlighter-rouge">WEB-SERVER-01</code> et <code class="highlighter-rouge">WEB-SERVER-02</code>, et chacune de ces deux machines propose d’autres services.</p>

<p>Si je veux désigner le serveur web sur <code class="highlighter-rouge">WEB-SERVER-01</code>, le SPN se présente de la façon suivante :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>www/WEB-SERVER-01
</code></pre></div></div>

<p>ou</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>www/WEB-SERVER-01.adsec.local
</code></pre></div></div>

<p>Dans la vraie vie, voici le SPN d’un service dans un ticket Kerberos :</p>

<p><a href="/assets/uploads/2019/02/SPN_ST.png"><img src="/assets/uploads/2019/02/SPN_ST.png" alt="SPN" /></a></p>

<p>Ce ticket est destiné à l’utilisation du service <code class="highlighter-rouge">www</code> sur la machine <code class="highlighter-rouge">WEB-SERVER-01</code> dans le domaine <code class="highlighter-rouge">adsec.local</code>.</p>

<h2 id="exemples">Exemples</h2>

<p>Il existe un grand nombre de classes de services, en voici une liste built-in tirée de la <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc772815(v=ws.10)#service-principal-names">documentation de Microsoft</a>.</p>

<p><a href="/assets/uploads/2019/02/liste_spn.png"><img src="/assets/uploads/2019/02/liste_spn.png" alt="Liste SPN" /></a></p>

<p>Nous reconnaissons quelques classes de services, telles que <code class="highlighter-rouge">CIFS</code> pour les services en lien avec le partage de fichiers, <code class="highlighter-rouge">DNS</code>, <code class="highlighter-rouge">WWW</code> dont nous avons déjà parlé, ou encore <code class="highlighter-rouge">spooler</code> qui regroupe les services d’impression.</p>

<p>Cette liste n’est pas exhaustive, on ne retrouve par exemple pas de <code class="highlighter-rouge">SqlServer</code> que l’on recontre habituellement dans les environnements AD, ou encore la classe <code class="highlighter-rouge">LDAP</code> qui réunit les services d’annuaire.</p>

<h2 id="cas-particulier---host">Cas particulier - HOST</h2>

<p>Il existe un cas particulier que nous rencontrons dans les attributs SPN d’un objet dans l’AD, c’est le SPN <code class="highlighter-rouge">HOST</code>.</p>

<p><a href="/assets/uploads/2019/02/host_spn.png"><img src="/assets/uploads/2019/02/host_spn.png" alt="HOST SPN" /></a></p>

<p>Le SPN <code class="highlighter-rouge">HOST</code> n’est pas vraiment une classe de service. C’est un SPN qui est un regroupement de classes de services, une sorte d’alias qui regroupe un grand nombre de SPN. Les éléments qu’il regroupe sont définis dans l’attribut “SPN-Mappings” de l’AD. On peut énumérer ces classes via la commande suivante :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Get-ADObject -Identity "CN=Directory Service,CN=Windows NT,CN=Services,CN=Configuration,DC=HALO,DC=NET" -properties sPNMappings
</code></pre></div></div>

<p><a href="/assets/uploads/2019/02/sPNMappings.png"><img src="/assets/uploads/2019/02/sPNMappings.png" alt="SPN Mappings" /></a></p>

<p>Ainsi, si jamais un utilisateur cherche le SPN <code class="highlighter-rouge">www</code> sur la machine <code class="highlighter-rouge">WEB-SERVER-01</code>, l’AD cherchera <code class="highlighter-rouge">www/WEB-SERVER-01</code> mais il cherchera également <code class="highlighter-rouge">HOST/WEB-SERVER-01</code>. Si la machine possède le SPN <code class="highlighter-rouge">HOST</code> alors cela veut dire qu’elle possède le SPN <code class="highlighter-rouge">www</code> (et beaucoup d’autres).</p>

<p><strong>Note :</strong> Ce SPN (<code class="highlighter-rouge">HOST</code>) reste un peu un mystère pour moi. En effet, lors de la génération d’un <a href="/kerberos-silver-golden-tickets">Silver Ticket</a>, si on décide que le SPN est <code class="highlighter-rouge">HOST</code>, alors on peut effectuer certaines tâches telles que la gestion des services ou la gestion des tâches planifiées. Cependant, bien que <code class="highlighter-rouge">CIFS</code> soit inclu dans l’attribut <code class="highlighter-rouge">SPN-Mappings</code>, je n’étais pas en mesure d’accéder au partage <code class="highlighter-rouge">C$</code> de la machine.</p>

<p>En posant la question sur le <a href="https://bloodhoundgang.herokuapp.com/">slack de Bloodhound</a>, <a href="https://twitter.com/pyrotek3">@pyrotek3</a> (<a href="https://adsecurity.org/?page_id=8">ADSecurity.org</a>) m’a répondu ceci :</p>

<blockquote>
  <p>I have seen the same thing. You would think that HOST would handle most things for the Windows system, but there are certain types of calls that need more than HOST since its a catch-all. I only figured out what worked through trial and error (and lots of testing).
From what I have seen HOST can provide SPN coverage and is a “catch-all” for standard system SPNs so the same SPNs don’t have to be registered on every system. For “privileged” type activity, using CIFS seems to be required. For Silver Tickets, you can use whatever SPN you want (provided the system will respond) since the DC isn’t involved and the SPNs registered on the computer account in AD doesn’t really matter (since you create the ticket and connect directly to the system bypassing the DC and AD).
It has been a while since I dug into this.</p>
</blockquote>

<p>Si quelqu’un est en mesure d’apporter des précisions, n’hésitez pas à les partager via les commentaires ou en me contactant sur Twitter (<a href="https://twitter.com/HackAndDo">@HackAndDo</a>).</p>

<h2 id="en-pratique">En pratique</h2>

<p>Voici un petit script PowerShell qui permet de lister les SPNs présents dans l’Active Directory. Le filtre utilisé est <code class="highlighter-rouge">(servicePrincipalName=*)</code> qui retourne les résultats avec l’attribut non nul.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">New-Object</span><span class="w"> </span><span class="nx">DirectoryServices.DirectorySearcher</span><span class="p">([</span><span class="kt">ADSI</span><span class="p">]</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="nv">$search</span><span class="o">.</span><span class="nf">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"(servicePrincipalName=*)"</span><span class="w">
</span><span class="nv">$results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$search</span><span class="o">.</span><span class="nf">Findall</span><span class="p">()</span><span class="w">
</span><span class="kr">foreach</span><span class="p">(</span><span class="nv">$result</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$results</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
	</span><span class="nv">$userEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$result</span><span class="o">.</span><span class="nf">GetDirectoryEntry</span><span class="p">()</span><span class="w">
	</span><span class="nf">Write-host</span><span class="w"> </span><span class="s2">"Object : "</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">name</span><span class="w"> </span><span class="s2">"("</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">distinguishedName</span><span class="w"> </span><span class="s2">")"</span><span class="w">
	</span><span class="nx">Write-host</span><span class="w"> </span><span class="s2">"List SPN :"</span><span class="w">        
	</span><span class="nx">foreach</span><span class="p">(</span><span class="nv">$SPN</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">servicePrincipalName</span><span class="p">)</span><span class="w">
	</span><span class="p">{</span><span class="w">
		</span><span class="nf">Write-Host</span><span class="w"> </span><span class="nv">$SPN</span><span class="w">       
	</span><span class="p">}</span><span class="w">
	</span><span class="nf">Write-host</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Ce qui donne en lab :</p>

<p><a href="/assets/uploads/2019/03/SPNListPowershell.png"><img src="/assets/uploads/2019/03/SPNListPowershell.png" alt="SPN MapListpings" /></a></p>

<p>On voit apparaitre les différents objets possédant au moins un attribut SPN.</p>

<p>Si nous ne voulions voir que les comptes utilisateurs qui possèdent un (ou plusieurs SPNs), voici une solution possible :</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">New-Object</span><span class="w"> </span><span class="nx">DirectoryServices.DirectorySearcher</span><span class="p">([</span><span class="kt">ADSI</span><span class="p">]</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="nv">$search</span><span class="o">.</span><span class="nf">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"(&amp;(objectCategory=person)(objectClass=user)(servicePrincipalName=*))"</span><span class="w">
</span><span class="nv">$results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$search</span><span class="o">.</span><span class="nf">Findall</span><span class="p">()</span><span class="w">
</span><span class="kr">foreach</span><span class="p">(</span><span class="nv">$result</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$results</span><span class="p">)</span><span class="w">
</span><span class="p">{</span><span class="w">
	</span><span class="nv">$userEntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$result</span><span class="o">.</span><span class="nf">GetDirectoryEntry</span><span class="p">()</span><span class="w">
	</span><span class="nf">Write-host</span><span class="w"> </span><span class="s2">"User : "</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">name</span><span class="w"> </span><span class="s2">"("</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">distinguishedName</span><span class="w"> </span><span class="s2">")"</span><span class="w">
	</span><span class="nx">Write-host</span><span class="w"> </span><span class="s2">"SPNs"</span><span class="w">        
	</span><span class="nx">foreach</span><span class="p">(</span><span class="nv">$SPN</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nv">$userEntry</span><span class="o">.</span><span class="nf">servicePrincipalName</span><span class="p">)</span><span class="w">
	</span><span class="p">{</span><span class="w">
		</span><span class="nv">$SPN</span><span class="w">       
	</span><span class="p">}</span><span class="w">
	</span><span class="nf">Write-host</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Dans mon lab, voilà le résultat de ce script :</p>

<p><a href="/assets/uploads/2019/03/SPNListUsersPowershell.png"><img src="/assets/uploads/2019/03/SPNListUsersPowershell.png" alt="SPN MapListpings" /></a></p>

<p>Cette requête sera pratique pour une attaque que nous décrirons dans le prochain article, le <strong>Kerberoasting</strong>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Cet article relativement court a permis de lever le voile sur la notion de SPN qui sera utilisée à diverses reprises. Ce n’est pas quelque chose de compliqué, cependant je trouvais que les documentations étaient toujours vagues. Je complèterai cet article si jamais d’autres éclaircissements sont nécessaires.</p>

<p>Si vous avez des précisions ou des corrections, n’hésitez pas à les partager, comme à chaque fois !</p>

  </article>
</div>
<div class="keywords">
    <span class="post-tags"><a href="/archives/#active-directory"><i class="fas fa-tags"></i> Active Directory</a><a href="/archives/#windows"><i class="fas fa-tags"></i> Windows</a></span>
  </div>


<br />
<div class="box">
  <div class="dash">
    <div class="picture">
      <img src="/assets/icones/pixis_logo.png" alt="logo" title="logo" />
    </div>
    <div class="box_content">
      <strong>Auteur</strong> : <a href="/contact/" target="_blank">Pixis</a><br />
      Créateur du blog, suivez-moi sur <a href="https://twitter.com/HackAndDo/" target="_blank">twitter</a> ou <a href="https://discord.gg/9At6SUZ" target="blank">discord</a>
    </div>
    
  </div>
</div>


<div class="related">
  <h2>Articles similaires</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/pass-the-hash/">
            Pass the Hash
            <small>18 Dec 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/remote-lsass-dump-passwords/">
            Extraction des secrets de lsass à distance
            <small>28 Nov 2019</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/bloodhound/">
            BloodHound
            <small>30 Jul 2019</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
        this.page.url = 'http://localhost:4000/service-principal-name-spn/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '0000-0000-0000-00a9';
    };
    
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//hackndo.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

        </div>
    </main>
    <script src="/assets/js/jquery-2.1.4.js"></script>
    <script src="/assets/js/jquery.menu-aim.js"></script>
    <script src="/assets/js/anchor.min.js"></script>
    <script src="/assets/js/main.js"></script> <!-- Resource jQuery -->
  </body>
</html>